ğŸ“‹ Adding membership payment unique constraint...
âœ… Membership payment constraint added
ğŸ“‹ Updating admin usernames to new standard...
âœ… Admin usernames and names updated
ğŸ“‹ Adding missing columns to existing tables...
âœ… Processed 214 column fixes (0 skipped)
ğŸ“‹ Fixing NOT NULL constraints on created_by_id columns...
âœ… Fixed 4 NOT NULL constraints
ğŸ“‹ Fixing NOT NULL constraints on legacy 'title' columns...
âœ… Fixed events.start_date NOT NULL constraint
âœ… Synced events.date_time â†’ start_date
âœ… Fixed 1 legacy 'title' NOT NULL constraints
ğŸ“‹ Fixing membership_applications nullable fields...
  âœ“ country
  âœ“ email
  âœ“ employment_status
  âœ“ occupation
  âœ“ skills_hobbies
  âœ“ spouse_name
  âœ“ spouse_phone
  âœ“ children_info
  âœ“ reviewed_by_id
  âœ“ reviewed_at
  âœ“ review_notes
  âœ“ photo
âœ… Fixed 12 membership_applications nullable constraints
ğŸ“‹ Assigning registry numbers to existing members...
âœ… Assigned registry numbers to 0 existing members
ğŸ“‹ Migrating user foreign key constraints to CASCADE...
âœ… Migrated 26 foreign key constraints to CASCADE
ğŸ“‹ Migrating title->name for legacy tables...
  âœ… Migrated events: copied title->name
âœ… Migrated 1 tables (title->name)
ğŸ“‹ Syncing membership settings currency with organization...
âœ… Membership currency synced with organization settings
ğŸ“‹ Fixing tenant enabled_modules with correct module IDs...
âœ… Tenant enabled_modules fixed for full-tier tenants
âœ… Schema migration complete
ğŸ“‹ Verifying all schema tables exist...
âœ… All 47 tables verified
âœ… Database schema synchronized successfully!
[INIT] Registering /api/auth/superadmin/login endpoint
ğŸ“‚ Serving static files from: /app/dist/public
1:52:32 PM [express] serving on port 3000
âœ… Admin user already exists
ğŸŒ± Starting default tenant seed...
ğŸ“‹ Creating subscription plans...
ğŸ“‹ Updating existing subscription plans with latest modules...
âœ… Full plan modules updated
ğŸ” Creating SuperAdmin global tenant...
âŒ Seed failed: error: column "default_currency" does not exist
    at /app/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
    at async seedDefaultTenant (file:///app/dist/index.js:3645:38)
    at async startSeeding (file:///app/dist/index.js:11920:5) {
  length: 117,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '277',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
Seed error: error: column "default_currency" does not exist
    at /app/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
    at async seedDefaultTenant (file:///app/dist/index.js:3645:38)
    at async startSeeding (file:///app/dist/index.js:11920:5) {
  length: 117,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '277',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}