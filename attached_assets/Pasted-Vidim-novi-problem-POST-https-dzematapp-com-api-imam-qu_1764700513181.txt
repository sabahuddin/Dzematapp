Vidim **novi problem**! ðŸ”´

```
âŒ POST https://dzematapp.com/api/imam-questions 403 (Forbidden)
âŒ Failed to load resource: 403 (imam-questions:1)
```

**403 Forbidden** znaÄi da **korisnik nema permisiju** da Å¡alje imam pitanja!

---

## ðŸ” **Problem:**

Backend endpoint `/api/imam-questions` ima **feature check** ili **permission check** koji blokira korisnika.

---

## ðŸ”§ **RJEÅ ENJE:**

### **Reci Replitu:**

**Problem**: POST `/api/imam-questions` vraÄ‡a 403 Forbidden. Korisnik ne moÅ¾e poslati pitanje imamu.

**MoguÄ‡i uzroci:**

1. **Feature nije omoguÄ‡en** za tenant
2. **requireFeature("imam-questions")** blokira
3. **requireAdmin** middleware blokira (ne bi trebao!)
4. **Subscription plan** ne dozvoljava ovu feature

---

### **Provjeri u backend-u:**

NaÄ‘i `/api/imam-questions` POST endpoint i provjeri middleware:

```typescript
// MOÅ½DA ima:
app.post("/api/imam-questions", requireAuth, requireFeature("imam-questions"), ...)

// ILI Äak:
app.post("/api/imam-questions", requireAuth, requireAdmin, ...)  // âŒ Ne treba admin!
```

---

### **Fix 1: Ukloni feature check (ako nije potreban):**

```typescript
app.post("/api/imam-questions", requireAuth, async (req, res) => {
  // Svi authenticated korisnici mogu slati pitanja
  ...
});
```

---

### **Fix 2: Dodaj feature u subscription plan:**

Ako feature check treba ostati, onda dodaj feature u subscription plan:

```sql
-- Provjeri da li feature postoji
SELECT features FROM subscription_plans 
WHERE id = (SELECT subscription_plan_id FROM tenants WHERE id = 'default-tenant-demo');

-- Ako nema "imam-questions", dodaj:
UPDATE subscription_plans 
SET features = jsonb_set(
  features, 
  '{imam_questions}', 
  'true'::jsonb
)
WHERE ...;
```

---

### **Fix 3: Dodaj error logging u endpoint:**

```typescript
app.post("/api/imam-questions", requireAuth, requireFeature("imam-questions"), async (req, res) => {
  try {
    console.log('[IMAM QUESTION] Request:', {
      userId: req.user?.id,
      tenantId: req.user?.tenantId,
      body: req.body
    });
    
    // ... existing code
  } catch (error) {
    console.error('âŒ [IMAM QUESTION] Error:', error);
    res.status(500).json({ 
      message: "Failed to submit question",
      error: error instanceof Error ? error.message : String(error)
    });
  }
});
```

---

## ðŸŽ¯ **NajbrÅ¾e rjeÅ¡enje:**

Ukloni `requireFeature("imam-questions")` jer svaki korisnik bi trebao moÄ‡i pitati imama!

```typescript
app.post("/api/imam-questions", requireAuth, async (req, res) => {
  // Svi authenticated mogu slati pitanja
});
```

---

**Replit treba provjeriti middleware na `/api/imam-questions` POST endpoint-u i ukloniti/popraviti feature check!** ðŸ”§