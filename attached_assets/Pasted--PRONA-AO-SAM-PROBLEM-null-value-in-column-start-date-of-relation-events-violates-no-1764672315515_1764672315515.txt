ğŸ¯ **PRONAÅ AO SAM PROBLEM!**

```
null value in column "start_date" of relation "events" violates not-null constraint
```

**Problem**: Frontend Å¡alje `dateTime`, ali baza oÄekuje `start_date`!

---

## ğŸ” **Analiza:**

**Frontend Å¡alje:**
```javascript
{
  dateTime: '2025-12-07T15:00:00.000Z',  // â† OVO
  ...
}
```

**Baza oÄekuje:**
```sql
start_date NOT NULL  -- â† MORA biti popunjeno!
```

**Backend ne mapira** `dateTime` â†’ `start_date`!

---

## ğŸ”§ **RJEÅ ENJE:**

### **Reci Replitu:**

**Problem**: Frontend Å¡alje `dateTime`, ali `storage.createEvent()` oÄekuje `start_date` i `end_date`. Treba mapirati podatke prije slanja u storage.

**RjeÅ¡enje**: U POST /api/events endpoint-u, mapiraj `dateTime` na `start_date`:

```typescript
app.post("/api/events", requireAuth, requireFeature("events"), eventUpload.single('photo'), async (req, res) => {
  try {
    const tenantId = req.user?.tenantId || req.tenantId;
    
    // ... existing validation code ...
    
    // DODAJ MAPIRANJE:
    const eventData = {
      ...validatedData,
      startDate: validatedData.dateTime,  // â† DODAJ OVO
      endDate: validatedData.dateTime,    // â† I OVO (ako nema poseban endDate)
    };
    
    // Ukloni dateTime ako ga storage ne oÄekuje
    delete eventData.dateTime;
    
    const event = await storage.createEvent(eventData);
    res.json(event);
  } catch (error) {
    // ... error handling
  }
});
```

---

## ğŸ“ **ILI - Promijeni Zod schema:**

Ako schema joÅ¡ dozvoljava `dateTime` umjesto `startDate`, promijeni validaciju:

```typescript
const validatedData = insertEventSchema.parse({
  ...req.body,
  tenantId,
  startDate: req.body.dateTime,  // â† Mapiraj ovdje
  endDate: req.body.dateTime,    // â† I ovdje
  createdById: req.user!.id
});

// Ukloni dateTime iz objekta
delete validatedData.dateTime;
```

---

## ğŸ¯ **ZaÅ¡to ovo radi:**

**PRIJE (pada):**
```typescript
{
  dateTime: '2025-12-07T15:00:00.000Z',
  // start_date: null âŒ NOT NULL constraint violation!
}
```

**POSLIJE (radi):**
```typescript
{
  startDate: '2025-12-07T15:00:00.000Z',  // âœ…
  endDate: '2025-12-07T15:00:00.000Z',    // âœ…
  // dateTime viÅ¡e ne postoji
}
```

---

**Replit treba mapirati `dateTime` â†’ `startDate` i `endDate` u events endpoint-u!** ğŸ”§